{"ast":null,"code":"import React,{useState}from'react';import{useNavigate,useParams}from'react-router-dom';import{ArrowLeft}from'lucide-react';import{useCartStore}from'../store';import ProductCard from'../components/ProductCard';import QuantitySelector from'../components/QuantitySelector';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProductListingPage=()=>{const navigate=useNavigate();const{categoryId}=useParams();const{addToCart,items:cartItems,updateQuantity,removeFromCart}=useCartStore();// Mock category name\nconst categoryNames={'1':'Vegetables & Fruits','2':'Atta, Rice & Dal','3':'Oil, Ghee & Masala','4':'Dairy, Bread & Eggs','5':'Snacks & Drinks','0':'All Products'};// Mock products\nconst products=[{id:1,name:'Onion',weight:'1 kg',price:35,mrp:50,image:'https://via.placeholder.com/200?text=Onion',rating:4.5,category:1,discount:30},{id:2,name:'Tomato',weight:'500g',price:28,mrp:40,image:'https://via.placeholder.com/200?text=Tomato',rating:4.3,category:1,discount:30},{id:3,name:'Potato',weight:'1 kg',price:25,mrp:35,image:'https://via.placeholder.com/200?text=Potato',rating:4.4,category:1},{id:4,name:'Aata',weight:'5 kg',price:180,mrp:220,image:'https://via.placeholder.com/200?text=Aata',rating:4.7,category:2,discount:18},{id:5,name:'Basmati Rice',weight:'1 kg',price:120,mrp:150,image:'https://via.placeholder.com/200?text=Rice',rating:4.6,category:2},{id:6,name:'Dal',weight:'1 kg',price:95,mrp:130,image:'https://via.placeholder.com/200?text=Dal',rating:4.5,category:2,discount:27},{id:7,name:'Sunflower Oil',weight:'1 L',price:145,mrp:180,image:'https://via.placeholder.com/200?text=Oil',rating:4.4,category:3,discount:19},{id:8,name:'Mustard Oil',weight:'1 L',price:165,mrp:210,image:'https://via.placeholder.com/200?text=Mustard',rating:4.3,category:3,discount:21}];const filteredProducts=categoryId==='0'?products:products.filter(p=>p.category===parseInt(categoryId));const handleAddToCart=product=>{addToCart(product);};const handleIncreaseQuantity=productId=>{const item=cartItems.find(item=>item.id===productId);if(item){updateQuantity(productId,item.quantity+1);}};const handleDecreaseQuantity=productId=>{const item=cartItems.find(item=>item.id===productId);if(item&&item.quantity>1){updateQuantity(productId,item.quantity-1);}else if(item){removeFromCart(productId);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white min-h-screen pb-20\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sticky top-0 z-40 bg-white border-b border-gray-200 px-4 py-3 flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(-1),className:\"p-2 hover:bg-gray-100 rounded-lg transition-colors\",children:/*#__PURE__*/_jsx(ArrowLeft,{size:24})}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-lg font-bold\",children:categoryNames[categoryId]||'Products'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-4 grid grid-cols-2 gap-2\",children:filteredProducts.map(product=>{const cartItem=cartItems.find(item=>item.id===product.id);return/*#__PURE__*/_jsx(\"div\",{children:cartItem?/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-2 product-card-shadow\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative w-full aspect-square bg-gray-100 rounded-lg overflow-hidden mb-2 cursor-pointer\",onClick:()=>navigate(\"/product/\".concat(product.id)),children:[/*#__PURE__*/_jsx(\"img\",{src:product.image,alt:product.name,className:\"w-full h-full object-cover\"}),product.discount&&/*#__PURE__*/_jsxs(\"div\",{className:\"badge-discount\",children:[product.discount,\"% OFF\"]})]}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-semibold text-gray-900 line-clamp-2\",children:product.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mb-2\",children:product.weight}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between mb-2\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-bold text-gray-900\",children:[\"\\u20B9\",product.price]})}),/*#__PURE__*/_jsx(QuantitySelector,{quantity:cartItem.quantity,onIncrease:()=>handleIncreaseQuantity(product.id),onDecrease:()=>handleDecreaseQuantity(product.id),compact:true})]}):/*#__PURE__*/_jsx(ProductCard,{product:product,onAddToCart:handleAddToCart})},product.id);})})]});};export default ProductListingPage;","map":{"version":3,"names":["React","useState","useNavigate","useParams","ArrowLeft","useCartStore","ProductCard","QuantitySelector","jsx","_jsx","jsxs","_jsxs","ProductListingPage","navigate","categoryId","addToCart","items","cartItems","updateQuantity","removeFromCart","categoryNames","products","id","name","weight","price","mrp","image","rating","category","discount","filteredProducts","filter","p","parseInt","handleAddToCart","product","handleIncreaseQuantity","productId","item","find","quantity","handleDecreaseQuantity","className","children","onClick","size","map","cartItem","concat","src","alt","onIncrease","onDecrease","compact","onAddToCart"],"sources":["C:/Users/abhay/OneDrive/Desktop/New folder/RozanaMart/frontend/src/pages/ProductListingPage.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport { ArrowLeft } from 'lucide-react';\r\nimport { useCartStore } from '../store';\r\nimport ProductCard from '../components/ProductCard';\r\nimport QuantitySelector from '../components/QuantitySelector';\r\n\r\nconst ProductListingPage = () => {\r\n  const navigate = useNavigate();\r\n  const { categoryId } = useParams();\r\n  const { addToCart, items: cartItems, updateQuantity, removeFromCart } = useCartStore();\r\n  \r\n  // Mock category name\r\n  const categoryNames = {\r\n    '1': 'Vegetables & Fruits',\r\n    '2': 'Atta, Rice & Dal',\r\n    '3': 'Oil, Ghee & Masala',\r\n    '4': 'Dairy, Bread & Eggs',\r\n    '5': 'Snacks & Drinks',\r\n    '0': 'All Products',\r\n  };\r\n  \r\n  // Mock products\r\n  const products = [\r\n    { id: 1, name: 'Onion', weight: '1 kg', price: 35, mrp: 50, image: 'https://via.placeholder.com/200?text=Onion', rating: 4.5, category: 1, discount: 30 },\r\n    { id: 2, name: 'Tomato', weight: '500g', price: 28, mrp: 40, image: 'https://via.placeholder.com/200?text=Tomato', rating: 4.3, category: 1, discount: 30 },\r\n    { id: 3, name: 'Potato', weight: '1 kg', price: 25, mrp: 35, image: 'https://via.placeholder.com/200?text=Potato', rating: 4.4, category: 1 },\r\n    { id: 4, name: 'Aata', weight: '5 kg', price: 180, mrp: 220, image: 'https://via.placeholder.com/200?text=Aata', rating: 4.7, category: 2, discount: 18 },\r\n    { id: 5, name: 'Basmati Rice', weight: '1 kg', price: 120, mrp: 150, image: 'https://via.placeholder.com/200?text=Rice', rating: 4.6, category: 2 },\r\n    { id: 6, name: 'Dal', weight: '1 kg', price: 95, mrp: 130, image: 'https://via.placeholder.com/200?text=Dal', rating: 4.5, category: 2, discount: 27 },\r\n    { id: 7, name: 'Sunflower Oil', weight: '1 L', price: 145, mrp: 180, image: 'https://via.placeholder.com/200?text=Oil', rating: 4.4, category: 3, discount: 19 },\r\n    { id: 8, name: 'Mustard Oil', weight: '1 L', price: 165, mrp: 210, image: 'https://via.placeholder.com/200?text=Mustard', rating: 4.3, category: 3, discount: 21 },\r\n  ];\r\n  \r\n  const filteredProducts = categoryId === '0'\r\n    ? products\r\n    : products.filter(p => p.category === parseInt(categoryId));\r\n  \r\n  const handleAddToCart = (product) => {\r\n    addToCart(product);\r\n  };\r\n  \r\n  const handleIncreaseQuantity = (productId) => {\r\n    const item = cartItems.find(item => item.id === productId);\r\n    if (item) {\r\n      updateQuantity(productId, item.quantity + 1);\r\n    }\r\n  };\r\n  \r\n  const handleDecreaseQuantity = (productId) => {\r\n    const item = cartItems.find(item => item.id === productId);\r\n    if (item && item.quantity > 1) {\r\n      updateQuantity(productId, item.quantity - 1);\r\n    } else if (item) {\r\n      removeFromCart(productId);\r\n    }\r\n  };\r\n  \r\n  return (\r\n    <div className=\"bg-white min-h-screen pb-20\">\r\n      {/* Header */}\r\n      <div className=\"sticky top-0 z-40 bg-white border-b border-gray-200 px-4 py-3 flex items-center gap-3\">\r\n        <button\r\n          onClick={() => navigate(-1)}\r\n          className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\r\n        >\r\n          <ArrowLeft size={24} />\r\n        </button>\r\n        <h1 className=\"text-lg font-bold\">{categoryNames[categoryId] || 'Products'}</h1>\r\n      </div>\r\n      \r\n      {/* Products Grid */}\r\n      <div className=\"px-4 py-4 grid grid-cols-2 gap-2\">\r\n        {filteredProducts.map((product) => {\r\n          const cartItem = cartItems.find(item => item.id === product.id);\r\n          return (\r\n            <div key={product.id}>\r\n              {cartItem ? (\r\n                <div className=\"bg-white rounded-lg p-2 product-card-shadow\">\r\n                  <div className=\"relative w-full aspect-square bg-gray-100 rounded-lg overflow-hidden mb-2 cursor-pointer\"\r\n                    onClick={() => navigate(`/product/${product.id}`)}\r\n                  >\r\n                    <img\r\n                      src={product.image}\r\n                      alt={product.name}\r\n                      className=\"w-full h-full object-cover\"\r\n                    />\r\n                    {product.discount && (\r\n                      <div className=\"badge-discount\">{product.discount}% OFF</div>\r\n                    )}\r\n                  </div>\r\n                  <h3 className=\"text-sm font-semibold text-gray-900 line-clamp-2\">{product.name}</h3>\r\n                  <p className=\"text-xs text-gray-500 mb-2\">{product.weight}</p>\r\n                  <div className=\"flex items-center justify-between mb-2\">\r\n                    <span className=\"text-sm font-bold text-gray-900\">â‚¹{product.price}</span>\r\n                  </div>\r\n                  <QuantitySelector\r\n                    quantity={cartItem.quantity}\r\n                    onIncrease={() => handleIncreaseQuantity(product.id)}\r\n                    onDecrease={() => handleDecreaseQuantity(product.id)}\r\n                    compact\r\n                  />\r\n                </div>\r\n              ) : (\r\n                <ProductCard product={product} onAddToCart={handleAddToCart} />\r\n              )}\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductListingPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}